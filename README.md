# 盘搜 - 基于TG频道的网盘搜索工具

本项目是一个功能强大的网盘搜索工具前端页面，集成了多家网盘的搜索结果，并提供了丰富的前端功能和后端支持。

与 [PanSou 网盘搜索 API](https://github.com/fish2018/pansou) 配合使用。它支持展示 TG 搜索和自定义插件搜索的结果，提供多平台资源聚合、智能筛选和热搜榜功能。
## ✨ 主要功能

- **多平台搜索**: 一次搜索，聚合展示来自阿里云盘、百度网盘、115、迅雷云盘等多个主流网盘的资源。
- **智能筛选**: 根据资源来源（网盘提供商）对搜索结果进行快速筛选。
- **热搜榜**: 自动记录和展示热门搜索词，最多显示前30个热门搜索。
- **违规词过滤**:
    - 自动过滤搜索内容，防止不当词语被记录到热搜榜。
    - 支持通过本地文件自定义中文违规词库。
- **数据管理**: 提供带密码保护的接口，用于清除所有热搜记录。

## 🚀 本地开发

本项目使用 Vercel 进行部署，您可以使用 Vercel CLI 在本地进行开发和测试。

1.  **安装依赖**:
    ```bash
    npm install
    ```

2.  **连接 Vercel 项目**:
    如果您是首次在本地运行，需要将此项目与您的 Vercel 账户关联。
    ```bash
    vercel link
    ```

3.  **拉取环境变量**:
    确保从 Vercel 拉取最新的环境变量，特别是 Vercel KV 的连接信息。
    ```bash
    vercel env pull .env.development.local
    ```

4.  **启动本地开发服务器**:
    此命令会启动一个本地服务器（通常在 `http://localhost:3000`），并连接到您在 Vercel 上配置的 KV 数据库。
    ```bash
    vercel dev
    ```

## ⚙️ 配置

### 清除密码

为了保护热搜数据不被随意删除，“清除热搜记录”功能需要密码验证。您需要在 Vercel 项目的环境变量中进行配置：

- **变量名**: `CLEAR_PASSWORD`
- **值**: 设置为您想要的密码

在 Vercel 项目的 "Settings" -> "Environment Variables" 中添加此变量即可。

### 自定义违规词库

系统会自动加载 `mgck/` 目录下的所有 `.txt` 文件作为违规词词库。

- **格式**: 每个词占一行。
- **编码**: 文件必须是 `GB2312` 编码。
- **操作**: 您只需将新的 `.txt` 词库文件放入 `mgck` 目录，项目重新部署或重启本地开发服务器后即可生效。

### Vercel KV 数据库

本项目使用 Vercel KV (基于Redis) 来存储热搜榜数据。您需要在 Vercel 项目中进行创建和关联。

1.  **创建数据库**:
    - 进入您的 Vercel 项目仪表盘。
    - 点击 "Storage" 标签页。
    - 选择 "KV (Redis)" 并创建一个新的数据库。

2.  **连接项目**:
    - 在创建过程中，Vercel 会引导您将数据库连接到当前项目。
    - 连接成功后，Vercel 会自动为项目添加所需的环境变量 (`KV_URL`, `KV_REST_API_URL`, `KV_REST_API_TOKEN`, `KV_REST_API_READ_ONLY_TOKEN`)。

3.  **本地同步**:
    - 运行 `vercel env pull .env.development.local` 命令，将这些新的环境变量同步到您的本地开发环境中。

## 📝 API 端点说明

本项目包含以下几个后端 API 端点：

- `GET /api/hot-searches`: 获取排名前30的热门搜索词。
- `POST /api/hot-searches`: 记录一个新的搜索词。此接口会自动进行违规词过滤，并限制热搜榜总数不超过50个。
- `POST /api/check-term`: 检查一个词是否为违规词，返回 `{ isForbidden: true/false }`。
- `POST /api/clear-hot-searches`: 清除所有热搜记录。需要提供在环境变量中配置的密码。
